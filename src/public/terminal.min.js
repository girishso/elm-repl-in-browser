!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){window.Terminal=__webpack_require__(1)},function(module,exports,__webpack_require__){var require,require;!function(f){module.exports=f()}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";function CompositionHelper(textarea,compositionView,terminal){this.textarea=textarea,this.compositionView=compositionView,this.terminal=terminal,this.isComposing=!1,this.compositionText=null,this.compositionPosition={start:null,end:null},this.isSendingComposition=!1}Object.defineProperty(exports,"__esModule",{value:!0}),CompositionHelper.prototype.compositionstart=function(){this.isComposing=!0,this.compositionPosition.start=this.textarea.value.length,this.compositionView.textContent="",this.compositionView.classList.add("active")},CompositionHelper.prototype.compositionupdate=function(ev){this.compositionView.textContent=ev.data,this.updateCompositionElements();var self=this;setTimeout(function(){self.compositionPosition.end=self.textarea.value.length},0)},CompositionHelper.prototype.compositionend=function(){this.finalizeComposition(!0)},CompositionHelper.prototype.keydown=function(ev){if(this.isComposing||this.isSendingComposition){if(229===ev.keyCode)return!1;if(16===ev.keyCode||17===ev.keyCode||18===ev.keyCode)return!1;this.finalizeComposition(!1)}return 229!==ev.keyCode||(this.handleAnyTextareaChanges(),!1)},CompositionHelper.prototype.finalizeComposition=function(waitForPropogation){if(this.compositionView.classList.remove("active"),this.isComposing=!1,this.clearTextareaPosition(),waitForPropogation){var currentCompositionPosition={start:this.compositionPosition.start,end:this.compositionPosition.end},self=this;this.isSendingComposition=!0,setTimeout(function(){if(self.isSendingComposition){self.isSendingComposition=!1;var input;input=self.isComposing?self.textarea.value.substring(currentCompositionPosition.start,currentCompositionPosition.end):self.textarea.value.substring(currentCompositionPosition.start),self.terminal.handler(input)}},0)}else{this.isSendingComposition=!1;var input=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end);this.terminal.handler(input)}},CompositionHelper.prototype.handleAnyTextareaChanges=function(){var oldValue=this.textarea.value,self=this;setTimeout(function(){if(!self.isComposing){var newValue=self.textarea.value,diff=newValue.replace(oldValue,"");diff.length>0&&self.terminal.handler(diff)}},0)},CompositionHelper.prototype.updateCompositionElements=function(dontRecurse){if(this.isComposing){var cursor=this.terminal.element.querySelector(".terminal-cursor");if(cursor){this.compositionView.style.left=cursor.offsetLeft+"px",this.compositionView.style.top=cursor.offsetTop+"px";var compositionViewBounds=this.compositionView.getBoundingClientRect();this.textarea.style.left=cursor.offsetLeft+compositionViewBounds.width+"px",this.textarea.style.top=cursor.offsetTop+cursor.offsetHeight+"px"}dontRecurse||setTimeout(this.updateCompositionElements.bind(this,!0),0)}},CompositionHelper.prototype.clearTextareaPosition=function(){this.textarea.style.left="",this.textarea.style.top=""},exports.CompositionHelper=CompositionHelper},{}],2:[function(_dereq_,module,exports){"use strict";function EventEmitter(){this._events=this._events||{}}Object.defineProperty(exports,"__esModule",{value:!0}),EventEmitter.prototype.addListener=function(type,listener){this._events[type]=this._events[type]||[],this._events[type].push(listener)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.removeListener=function(type,listener){if(this._events[type])for(var obj=this._events[type],i=obj.length;i--;)if(obj[i]===listener||obj[i].listener===listener)return void obj.splice(i,1)},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(type){this._events[type]&&delete this._events[type]},EventEmitter.prototype.once=function(type,listener){function on(){var args=Array.prototype.slice.call(arguments);return this.removeListener(type,on),listener.apply(this,args)}return on.listener=listener,this.on(type,on)},EventEmitter.prototype.emit=function(type){if(this._events[type])for(var args=Array.prototype.slice.call(arguments,1),obj=this._events[type],l=obj.length,i=0;i<l;i++)obj[i].apply(this,args)},EventEmitter.prototype.listeners=function(type){return this._events[type]=this._events[type]||[]},exports.EventEmitter=EventEmitter},{}],3:[function(_dereq_,module,exports){"use strict";function Viewport(terminal,viewportElement,scrollArea,charMeasureElement){this.terminal=terminal,this.viewportElement=viewportElement,this.scrollArea=scrollArea,this.charMeasureElement=charMeasureElement,this.currentRowHeight=0,this.lastRecordedBufferLength=0,this.lastRecordedViewportHeight=0,this.terminal.on("scroll",this.syncScrollArea.bind(this)),this.terminal.on("resize",this.syncScrollArea.bind(this)),this.viewportElement.addEventListener("scroll",this.onScroll.bind(this)),this.syncScrollArea()}Object.defineProperty(exports,"__esModule",{value:!0}),Viewport.prototype.refresh=function(charSize){var size=charSize||this.charMeasureElement.getBoundingClientRect();if(size.height>0){var rowHeightChanged=size.height!==this.currentRowHeight;rowHeightChanged&&(this.currentRowHeight=size.height,this.viewportElement.style.lineHeight=size.height+"px",this.terminal.rowContainer.style.lineHeight=size.height+"px");var viewportHeightChanged=this.lastRecordedViewportHeight!==this.terminal.rows;(rowHeightChanged||viewportHeightChanged)&&(this.lastRecordedViewportHeight=this.terminal.rows,this.viewportElement.style.height=size.height*this.terminal.rows+"px"),this.scrollArea.style.height=size.height*this.lastRecordedBufferLength+"px"}},Viewport.prototype.syncScrollArea=function(){if(this.lastRecordedBufferLength!==this.terminal.lines.length)this.lastRecordedBufferLength=this.terminal.lines.length,this.refresh();else if(this.lastRecordedViewportHeight!==this.terminal.rows)this.refresh();else{var size=this.charMeasureElement.getBoundingClientRect();size.height!==this.currentRowHeight&&this.refresh(size)}var scrollTop=this.terminal.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==scrollTop&&(this.viewportElement.scrollTop=scrollTop)},Viewport.prototype.onScroll=function(ev){var newRow=Math.round(this.viewportElement.scrollTop/this.currentRowHeight),diff=newRow-this.terminal.ydisp;this.terminal.scrollDisp(diff,!0)},Viewport.prototype.onWheel=function(ev){if(0!==ev.deltaY){var multiplier=1;ev.deltaMode===WheelEvent.DOM_DELTA_LINE?multiplier=this.currentRowHeight:ev.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(multiplier=this.currentRowHeight*this.terminal.rows),this.viewportElement.scrollTop+=ev.deltaY*multiplier,ev.preventDefault()}},exports.Viewport=Viewport},{}],4:[function(_dereq_,module,exports){"use strict";function prepareTextForClipboard(text){var space=String.fromCharCode(32),nonBreakingSpace=String.fromCharCode(160),allNonBreakingSpaces=new RegExp(nonBreakingSpace,"g"),processedText=text.split("\n").map(function(line){var processedLine=line.replace(/\s+$/g,"").replace(allNonBreakingSpaces,space);return processedLine}).join("\n");return processedText}function copyHandler(ev){var copiedText=window.getSelection().toString(),text=prepareTextForClipboard(copiedText);ev.clipboardData.setData("text/plain",text),ev.preventDefault()}function pasteHandler(ev,term){if(ev.stopPropagation(),ev.clipboardData){var text=ev.clipboardData.getData("text/plain");return term.handler(text),term.textarea.value="",term.cancel(ev)}}function rightClickHandler(ev,term){var i,rect,s=document.getSelection(),sText=prepareTextForClipboard(s.toString()),r=s.getRangeAt(0),x=ev.clientX,y=ev.clientY,cr=r.getClientRects(),clickIsOnSelection=!1;for(i=0;i<cr.length&&(rect=cr[i],clickIsOnSelection=x>rect.left&&x<rect.right&&y>rect.top&&y<rect.bottom,!clickIsOnSelection||" "===sText);i++);clickIsOnSelection||(term.textarea.style.position="fixed",term.textarea.style.width="10px",term.textarea.style.height="10px",term.textarea.style.left=x+"px",term.textarea.style.top=y+"px",term.textarea.style.zIndex=1e3,term.textarea.focus(),setTimeout(function(){term.textarea.style.position=null,term.textarea.style.width=null,term.textarea.style.height=null,term.textarea.style.left=null,term.textarea.style.top=null,term.textarea.style.zIndex=null},1))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareTextForClipboard=prepareTextForClipboard,exports.copyHandler=copyHandler,exports.pasteHandler=pasteHandler,exports.rightClickHandler=rightClickHandler},{}],5:[function(_dereq_,module,exports){(function(__dirname){"use strict";function Terminal(options){var self=this;if(!(this instanceof Terminal))return new Terminal(arguments[0],arguments[1],arguments[2]);self.cancel=Terminal.cancel,_EventEmitter.EventEmitter.call(this),"number"==typeof options&&(options={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),options=options||{},Object.keys(Terminal.defaults).forEach(function(key){null==options[key]&&(options[key]=Terminal.options[key],Terminal[key]!==Terminal.defaults[key]&&(options[key]=Terminal[key])),self[key]=options[key]}),8===options.colors.length?options.colors=options.colors.concat(Terminal._colors.slice(8)):16===options.colors.length?options.colors=options.colors.concat(Terminal._colors.slice(16)):10===options.colors.length?options.colors=options.colors.slice(0,-2).concat(Terminal._colors.slice(8,-2),options.colors.slice(-2)):18===options.colors.length&&(options.colors=options.colors.concat(Terminal._colors.slice(16,-2),options.colors.slice(-2))),this.colors=options.colors,this.options=options,this.parent=options.body||options.parent||(document?document.getElementsByTagName("body")[0]:null),this.cols=options.cols||options.geometry[0],this.rows=options.rows||options.geometry[1],options.handler&&this.on("data",options.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.isRefreshing=!1,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.customKeydownHandler=null,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.normal=null,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.surrogate_high="",this.lines=[];for(var i=this.rows;i--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()}function contains(el,arr){for(var i=0;i<arr.length;i+=1)if(el===arr[i])return!0;return!1}function on(el,type,handler,capture){Array.isArray(el)||(el=[el]),el.forEach(function(element){element.addEventListener(type,handler,capture||!1)})}function off(el,type,handler,capture){el.removeEventListener(type,handler,capture||!1)}function cancel(ev,force){if(this.cancelEvents||force)return ev.preventDefault(),ev.stopPropagation(),!1}function inherits(child,parent){function f(){this.constructor=child}f.prototype=parent.prototype,child.prototype=new f}function isBoldBroken(document){var body=document.getElementsByTagName("body")[0],el=document.createElement("span");el.innerHTML="hello world",body.appendChild(el);var w1=el.scrollWidth;el.style.fontWeight="bold";var w2=el.scrollWidth;return body.removeChild(el),w1!==w2}function isThirdLevelShift(term,ev){var thirdLevelKey=term.isMac&&ev.altKey&&!ev.ctrlKey&&!ev.metaKey||term.isMSWindows&&ev.altKey&&ev.ctrlKey&&!ev.metaKey;return"keypress"==ev.type?thirdLevelKey:thirdLevelKey&&(!ev.keyCode||ev.keyCode>47)}function matchColor(r1,g1,b1){var hash=r1<<16|g1<<8|b1;if(null!=matchColor._cache[hash])return matchColor._cache[hash];for(var c,r2,g2,b2,diff,ldiff=1/0,li=-1,i=0;i<Terminal.vcolors.length;i++){if(c=Terminal.vcolors[i],r2=c[0],g2=c[1],b2=c[2],diff=matchColor.distance(r1,g1,b1,r2,g2,b2),0===diff){li=i;break}diff<ldiff&&(ldiff=diff,li=i)}return matchColor._cache[hash]=li}function each(obj,iter,con){if(obj.forEach)return obj.forEach(iter,con);for(var i=0;i<obj.length;i++)iter.call(con,obj[i],i,obj)}function keys(obj){if(Object.keys)return Object.keys(obj);var key,keys=[];for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&keys.push(key);return keys}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_CompositionHelper=_dereq_("./CompositionHelper.js"),_EventEmitter=_dereq_("./EventEmitter.js"),_Viewport=_dereq_("./Viewport.js"),_Clipboard=_dereq_("./handlers/Clipboard.js"),document="undefined"!=typeof window?window.document:null,normal=0,escaped=1,csi=2,osc=3,charset=4,dcs=5,ignore=6;inherits(Terminal,_EventEmitter.EventEmitter),Terminal.prototype.eraseAttr=function(){return this.defAttr&-512|511&this.curAttr},Terminal.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],Terminal.colors=function(){function out(r,g,b){colors.push("#"+hex(r)+hex(g)+hex(b))}function hex(c){return c=c.toString(16),c.length<2?"0"+c:c}var i,colors=Terminal.tangoColors.slice(),r=[0,95,135,175,215,255];for(i=0;i<216;i++)out(r[i/36%6|0],r[i/6%6|0],r[i%6]);for(i=0;i<24;i++)r=8+10*i,out(r,r,r);return colors}(),Terminal._colors=Terminal.colors.slice(),Terminal.vcolors=function(){for(var color,out=[],colors=Terminal.colors,i=0;i<256;i++)color=parseInt(colors[i].substring(1),16),out.push([color>>16&255,color>>8&255,255&color]);return out}(),Terminal.defaults={colors:Terminal.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,cancelEvents:!1},Terminal.options={},Terminal.focus=null,each(keys(Terminal.defaults),function(key){Terminal[key]=Terminal.defaults[key],Terminal.options[key]=Terminal.defaults[key]}),Terminal.prototype.focus=function(){return this.textarea.focus()},Terminal.prototype.getOption=function(key,value){if(!(key in Terminal.defaults))throw new Error('No option with key "'+key+'"');return"undefined"!=typeof this.options[key]?this.options[key]:this[key]},Terminal.prototype.setOption=function(key,value){if(!(key in Terminal.defaults))throw new Error('No option with key "'+key+'"');this[key]=value,this.options[key]=value},Terminal.bindFocus=function(term){on(term.textarea,"focus",function(ev){term.sendFocus&&term.send("[I"),term.element.classList.add("focus"),term.showCursor(),Terminal.focus=term,term.emit("focus",{terminal:term})})},Terminal.prototype.blur=function(){return this.textarea.blur()},Terminal.bindBlur=function(term){on(term.textarea,"blur",function(ev){term.refresh(term.y,term.y),term.sendFocus&&term.send("[O"),term.element.classList.remove("focus"),Terminal.focus=null,term.emit("blur",{terminal:term})})},Terminal.prototype.initGlobal=function(){var term=this;Terminal.bindKeys(this),Terminal.bindFocus(this),Terminal.bindBlur(this),on(this.element,"copy",_Clipboard.copyHandler),on(this.textarea,"paste",function(ev){_Clipboard.pasteHandler.call(this,ev,term)}),on(this.element,"contextmenu",function(ev){_Clipboard.rightClickHandler.call(this,ev,term)})},Terminal.bindKeys=function(term){on(term.element,"keydown",function(ev){document.activeElement==this&&term.keyDown(ev)},!0),on(term.element,"keypress",function(ev){document.activeElement==this&&term.keyPress(ev)},!0),on(term.element,"keyup",term.focus.bind(term)),on(term.textarea,"keydown",function(ev){term.keyDown(ev)},!0),on(term.textarea,"keypress",function(ev){term.keyPress(ev),this.value=""},!0),on(term.textarea,"compositionstart",term.compositionHelper.compositionstart.bind(term.compositionHelper)),on(term.textarea,"compositionupdate",term.compositionHelper.compositionupdate.bind(term.compositionHelper)),on(term.textarea,"compositionend",term.compositionHelper.compositionend.bind(term.compositionHelper)),term.on("refresh",term.compositionHelper.updateCompositionElements.bind(term.compositionHelper))},Terminal.prototype.insertRow=function(row){return"object"!=("undefined"==typeof row?"undefined":_typeof(row))&&(row=document.createElement("div")),this.rowContainer.appendChild(row),this.children.push(row),row},Terminal.prototype.open=function(parent){var self=this,i=0;if(this.parent=parent||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.context.navigator&&this.context.navigator.platform&&(this.isMac=contains(this.context.navigator.platform,["Macintosh","MacIntel","MacPPC","Mac68K"]),this.isIpad="iPad"===this.context.navigator.platform,this.isIphone="iPhone"===this.context.navigator.platform,this.isMSWindows=contains(this.context.navigator.platform,["Windows","Win16","Win32","WinCE"])),this.element=this.document.createElement("div"),this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.classList.add("xterm-theme-"+this.theme),this.element.style.height,this.element.setAttribute("tabindex",0),this.viewportElement=document.createElement("div"),this.viewportElement.classList.add("xterm-viewport"),this.element.appendChild(this.viewportElement),this.viewportScrollArea=document.createElement("div"),this.viewportScrollArea.classList.add("xterm-scroll-area"),this.viewportElement.appendChild(this.viewportScrollArea),this.rowContainer=document.createElement("div"),this.rowContainer.classList.add("xterm-rows"),this.element.appendChild(this.rowContainer),this.children=[],this.helperContainer=document.createElement("div"),this.helperContainer.classList.add("xterm-helpers"),this.element.appendChild(this.helperContainer),this.textarea=document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.textarea.addEventListener("focus",function(){self.emit("focus",{terminal:self})}),this.textarea.addEventListener("blur",function(){self.emit("blur",{terminal:self})}),this.helperContainer.appendChild(this.textarea),this.compositionView=document.createElement("div"),this.compositionView.classList.add("composition-view"),this.compositionHelper=new _CompositionHelper.CompositionHelper(this.textarea,this.compositionView,this),this.helperContainer.appendChild(this.compositionView),this.charMeasureElement=document.createElement("div"),this.charMeasureElement.classList.add("xterm-char-measure-element"),this.charMeasureElement.innerHTML="W",this.helperContainer.appendChild(this.charMeasureElement);i<this.rows;i++)this.insertRow();this.parent.appendChild(this.element),this.viewport=new _Viewport.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasureElement),this.refresh(0,this.rows-1),this.initGlobal(),this.focus(),on(this.element,"click",function(){var selection=document.getSelection(),collapsed=selection.isCollapsed,isRange="boolean"==typeof collapsed?!collapsed:"Range"==selection.type;isRange||self.focus()}),this.bindMouse(),null==Terminal.brokenBold&&(Terminal.brokenBold=isBoldBroken(this.document)),this.emit("open")},Terminal.loadAddon=function(addon,callback){return"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?_dereq_(__dirname+"/../addons/"+addon):"function"==typeof define?_dereq_(["../addons/"+addon+"/"+addon],callback):(console.error("Cannot load a module without a CommonJS or RequireJS environment."),!1)},Terminal.prototype.bindMouse=function(){function sendButton(ev){var button,pos;if(button=getButton(ev),pos=getCoords(ev))switch(sendEvent(button,pos),ev.overrideType||ev.type){case"mousedown":pressed=button;break;case"mouseup":pressed=32;break;case"wheel":}}function sendMove(ev){var pos,button=pressed;pos=getCoords(ev),pos&&(button+=32,sendEvent(button,pos))}function encode(data,ch){if(self.utfMouse){if(2047===ch)return data.push(0);ch<127?data.push(ch):(ch>2047&&(ch=2047),data.push(192|ch>>6),data.push(128|63&ch))}else{if(255===ch)return data.push(0);ch>127&&(ch=127),data.push(ch)}}function sendEvent(button,pos){if(self.vt300Mouse){button&=3,pos.x-=32,pos.y-=32;var data="[24";if(0===button)data+="1";else if(1===button)data+="3";else if(2===button)data+="5";else{if(3===button)return;data+="0"}return data+="~["+pos.x+","+pos.y+"]\r",void self.send(data)}if(self.decLocator)return button&=3,pos.x-=32,pos.y-=32,0===button?button=2:1===button?button=4:2===button?button=6:3===button&&(button=3),void self.send("["+button+";"+(3===button?4:0)+";"+pos.y+";"+pos.x+";"+(pos.page||0)+"&w");if(self.urxvtMouse)return pos.x-=32,pos.y-=32,pos.x++,pos.y++,void self.send("["+button+";"+pos.x+";"+pos.y+"M");if(self.sgrMouse)return pos.x-=32,pos.y-=32,void self.send("[<"+(3===(3&button)?button&-4:button)+";"+pos.x+";"+pos.y+(3===(3&button)?"m":"M"));var data=[];encode(data,button),encode(data,pos.x),encode(data,pos.y),self.send("[M"+String.fromCharCode.apply(String,data))}function getButton(ev){var button,shift,meta,ctrl,mod;switch(ev.overrideType||ev.type){case"mousedown":button=null!=ev.button?+ev.button:null!=ev.which?ev.which-1:null,self.isMSIE&&(button=1===button?0:4===button?1:button);break;case"mouseup":button=3;break;case"DOMMouseScroll":button=ev.detail<0?64:65;break;case"wheel":button=ev.wheelDeltaY>0?64:65}return shift=ev.shiftKey?4:0,meta=ev.metaKey?8:0,ctrl=ev.ctrlKey?16:0,mod=shift|meta|ctrl,self.vt200Mouse?mod&=ctrl:self.normalMouse||(mod=0),button=32+(mod<<2)+button}function getCoords(ev){var x,y,w,h,el;if(null!=ev.pageX){for(x=ev.pageX,y=ev.pageY,el=self.element;el&&el!==self.document.documentElement;)x-=el.offsetLeft,y-=el.offsetTop,el="offsetParent"in el?el.offsetParent:el.parentNode;return w=self.element.clientWidth,h=self.element.clientHeight,x=Math.ceil(x/w*self.cols),y=Math.ceil(y/h*self.rows),x<0&&(x=0),x>self.cols&&(x=self.cols),y<0&&(y=0),y>self.rows&&(y=self.rows),x+=32,y+=32,{x:x,y:y,type:"wheel"}}}var el=this.element,self=this,pressed=32;on(el,"mousedown",function(ev){if(self.mouseEvents)return sendButton(ev),self.focus(),self.vt200Mouse?(ev.overrideType="mouseup",sendButton(ev),self.cancel(ev)):(self.normalMouse&&on(self.document,"mousemove",sendMove),self.x10Mouse||on(self.document,"mouseup",function up(ev){return sendButton(ev),self.normalMouse&&off(self.document,"mousemove",sendMove),off(self.document,"mouseup",up),self.cancel(ev)}),self.cancel(ev))}),on(el,"wheel",function(ev){if(self.mouseEvents&&!(self.x10Mouse||self.vt300Mouse||self.decLocator))return sendButton(ev),self.cancel(ev)}),on(el,"wheel",function(ev){if(!self.mouseEvents)return self.viewport.onWheel(ev),self.cancel(ev)})},Terminal.prototype.destroy=function(){this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},Terminal.flags={BOLD:1,UNDERLINE:2,BLINK:4,INVERSE:8,INVISIBLE:16},Terminal.prototype.refresh=function(start,end,queue){var self=this;if(queue="undefined"==typeof queue||queue)return void(this._refreshIsQueued?this._fullRefreshNext=!0:(setTimeout(function(){self.refresh(start,end,!1)},34),this._refreshIsQueued=!0));this._refreshIsQueued=!1,this._fullRefreshNext&&(start=0,end=this.rows-1,this._fullRefreshNext=!1);var x,y,i,line,out,ch,ch_width,width,data,attr,bg,fg,flags,row,parent;document.activeElement;for(end-start>=this.rows/2&&(parent=this.element.parentNode,parent&&this.element.removeChild(this.rowContainer)),width=this.cols,y=start,end>=this.rows.length&&(this.log("`end` is too large. Most likely a bad CSR."),end=this.rows.length-1);y<=end;y++){for(row=y+this.ydisp,line=this.lines[row],out="",x=this.y===y-(this.ybase-this.ydisp)&&this.cursorState&&!this.cursorHidden?this.x:-1,attr=this.defAttr,i=0;i<width;i++)if(data=line[i][0],ch=line[i][1],ch_width=line[i][2]){if(i===x&&(data=-1),data!==attr&&(attr!==this.defAttr&&(out+="</span>"),data!==this.defAttr))if(data===-1)out+='<span class="reverse-video terminal-cursor',this.cursorBlink&&(out+=" blinking"),out+='">';else{var classNames=[];bg=511&data,fg=data>>9&511,flags=data>>18,flags&Terminal.flags.BOLD&&(Terminal.brokenBold||classNames.push("xterm-bold"),fg<8&&(fg+=8)),flags&Terminal.flags.UNDERLINE&&classNames.push("xterm-underline"),flags&Terminal.flags.BLINK&&classNames.push("xterm-blink"),flags&Terminal.flags.INVERSE&&(bg=[fg,fg=bg][0],1&flags&&fg<8&&(fg+=8)),flags&Terminal.flags.INVISIBLE&&classNames.push("xterm-hidden"),flags&Terminal.flags.INVERSE&&(257==bg&&(bg=15),256==fg&&(fg=0)),bg<256&&classNames.push("xterm-bg-color-"+bg),fg<256&&classNames.push("xterm-color-"+fg),out+="<span",classNames.length&&(out+=' class="'+classNames.join(" ")+'"'),out+=">"}switch(ch){case"&":out+="&amp;";break;case"<":out+="&lt;";break;case">":out+="&gt;";break;default:out+=ch<=" "?"&nbsp;":ch}attr=data}attr!==this.defAttr&&(out+="</span>"),this.children[y].innerHTML=out}parent&&this.element.appendChild(this.rowContainer),this.emit("refresh",{element:this.element,start:start,end:end})},Terminal.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},Terminal.prototype.scroll=function(){var row;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,row=this.ybase+this.rows-1,row-=this.rows-1-this.scrollBottom,row===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(row,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom),this.emit("scroll",this.ydisp)},Terminal.prototype.scrollDisp=function(disp,suppressScrollEvent){this.ydisp+=disp,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),suppressScrollEvent||this.emit("scroll",this.ydisp),this.refresh(0,this.rows-1)},Terminal.prototype.write=function(data){var cs,ch,code,low,ch_width,row,l=data.length,i=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.emit("scroll",this.ydisp),this.maxRange()),this.surrogate_high&&(data=this.surrogate_high+data,this.surrogate_high="");i<l;i++){if(ch=data[i],code=data.charCodeAt(i),55296<=code&&code<=56319){if(low=data.charCodeAt(i+1),isNaN(low)){this.surrogate_high=ch;continue}code=1024*(code-55296)+(low-56320)+65536,ch+=data.charAt(i+1)}if(!(56320<=code&&code<=57343))switch(this.state){case normal:switch(ch){case"":this.bell();break;case"\n":case"\x0B":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"\t":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=escaped;break;default:if(ch_width=wcwidth(code),ch>=" "){if(this.charset&&this.charset[ch]&&(ch=this.charset[ch]),row=this.y+this.ybase,!ch_width&&this.x){this.lines[row][this.x-1]&&(this.lines[row][this.x-1][2]?this.lines[row][this.x-1][1]+=ch:this.lines[row][this.x-2]&&(this.lines[row][this.x-2][1]+=ch),this.updateRange(this.y));break}if(this.x+ch_width-1>=this.cols)if(this.wraparoundMode)this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());else if(this.x=this.cols-1,2===ch_width)continue;if(row=this.y+this.ybase,this.insertMode)for(var moves=0;moves<ch_width;++moves){var removed=this.lines[this.y+this.ybase].pop();0===removed[2]&&this.lines[row][this.cols-2]&&2===this.lines[row][this.cols-2][2]&&(this.lines[row][this.cols-2]=[this.curAttr," ",1]),this.lines[row].splice(this.x,0,[this.curAttr," ",1])}this.lines[row][this.x]=[this.curAttr,ch,ch_width],this.x++,this.updateRange(this.y),2===ch_width&&(this.lines[row][this.x]=[this.curAttr,"",0],this.x++)}}break;case escaped:switch(ch){case"[":this.params=[],this.currentParam=0,this.state=csi;break;case"]":this.params=[],this.currentParam=0,this.state=osc;break;case"P":this.params=[],this.currentParam=0,this.state=dcs;break;case"_":this.state=ignore;break;case"^":this.state=ignore;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,Terminal.charsets.US),this.state=normal,i++;break;case"(":case")":case"*":case"+":case"-":case".":switch(ch){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=charset;break;case"/":this.gcharset=3,this.state=charset,i--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=normal;break;case"8":this.restoreCursor(),this.state=normal;break;case"#":this.state=normal,i++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.viewport.syncScrollArea(),this.state=normal;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.viewport.syncScrollArea(),this.state=normal;break;default:this.state=normal,this.error("Unknown ESC control: %s.",ch)}break;case charset:switch(ch){case"0":cs=Terminal.charsets.SCLD;break;case"A":cs=Terminal.charsets.UK;break;case"B":cs=Terminal.charsets.US;break;case"4":cs=Terminal.charsets.Dutch;break;case"C":case"5":cs=Terminal.charsets.Finnish;break;case"R":cs=Terminal.charsets.French;break;case"Q":cs=Terminal.charsets.FrenchCanadian;break;case"K":cs=Terminal.charsets.German;break;case"Y":cs=Terminal.charsets.Italian;break;case"E":case"6":cs=Terminal.charsets.NorwegianDanish;break;case"Z":cs=Terminal.charsets.Spanish;break;case"H":case"7":cs=Terminal.charsets.Swedish;break;case"=":cs=Terminal.charsets.Swiss;break;case"/":cs=Terminal.charsets.ISOLatin,i++;break;default:cs=Terminal.charsets.US}this.setgCharset(this.gcharset,cs),this.gcharset=null,this.state=normal;break;case osc:if(""===ch||""===ch){switch(""===ch&&i++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));
break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=normal}else this.params.length?this.currentParam+=ch:ch>="0"&&ch<="9"?this.currentParam=10*this.currentParam+ch.charCodeAt(0)-48:";"===ch&&(this.params.push(this.currentParam),this.currentParam="");break;case csi:if("?"===ch||">"===ch||"!"===ch){this.prefix=ch;break}if(ch>="0"&&ch<="9"){this.currentParam=10*this.currentParam+ch.charCodeAt(0)-48;break}if("$"===ch||'"'===ch||" "===ch||"'"===ch){this.postfix=ch;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===ch)break;switch(this.state=normal,ch){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",ch)}this.prefix="",this.postfix="";break;case dcs:if(""===ch||""===ch){switch(""===ch&&i++,this.prefix){case"":break;case"$q":var pt=this.currentParam,valid=!1;switch(pt){case'"q':pt='0"q';break;case'"p':pt='61"p';break;case"r":pt=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":pt="0m";break;default:this.error("Unknown DCS Pt: %s.",pt),pt=""}this.send("P"+ +valid+"$r"+pt+"\\");break;case"+p":break;case"+q":var pt=this.currentParam,valid=!1;this.send("P"+ +valid+"+r"+pt+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=normal}else this.currentParam?this.currentParam+=ch:this.prefix||"$"===ch||"+"===ch?2===this.prefix.length?this.currentParam=ch:this.prefix+=ch:this.currentParam=ch;break;case ignore:""!==ch&&""!==ch||(""===ch&&i++,this.state=normal)}}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)},Terminal.prototype.writeln=function(data){this.write(data+"\r\n")},Terminal.prototype.attachCustomKeydownHandler=function(customKeydownHandler){this.customKeydownHandler=customKeydownHandler},Terminal.prototype.keyDown=function(ev){if(this.customKeydownHandler&&this.customKeydownHandler(ev)===!1)return!1;if(!this.compositionHelper.keydown.bind(this.compositionHelper)(ev))return!1;var result=this.evaluateKeyEscapeSequence(ev);return result.scrollDisp?(this.scrollDisp(result.scrollDisp),this.cancel(ev,!0)):!!isThirdLevelShift(this,ev)||(result.cancel&&this.cancel(ev,!0),!result.key||(this.emit("keydown",ev),this.emit("key",result.key,ev),this.showCursor(),this.handler(result.key),this.cancel(ev,!0)))},Terminal.prototype.evaluateKeyEscapeSequence=function(ev){var result={cancel:!1,key:void 0,scrollDisp:void 0},modifiers=ev.shiftKey<<0|ev.altKey<<1|ev.ctrlKey<<2|ev.metaKey<<3;switch(ev.keyCode){case 8:if(ev.shiftKey){result.key="\b";break}result.key="";break;case 9:if(ev.shiftKey){result.key="[Z";break}result.key="\t",result.cancel=!0;break;case 13:result.key="\r",result.cancel=!0;break;case 27:result.key="",result.cancel=!0;break;case 37:modifiers?(result.key="[1;"+(modifiers+1)+"D","[1;3D"==result.key&&(result.key="[1;5D")):this.applicationCursor?result.key="OD":result.key="[D";break;case 39:modifiers?(result.key="[1;"+(modifiers+1)+"C","[1;3C"==result.key&&(result.key="[1;5C")):this.applicationCursor?result.key="OC":result.key="[C";break;case 38:modifiers?(result.key="[1;"+(modifiers+1)+"A","[1;3A"==result.key&&(result.key="[1;5A")):this.applicationCursor?result.key="OA":result.key="[A";break;case 40:modifiers?(result.key="[1;"+(modifiers+1)+"B","[1;3B"==result.key&&(result.key="[1;5B")):this.applicationCursor?result.key="OB":result.key="[B";break;case 45:ev.shiftKey||ev.ctrlKey||(result.key="[2~");break;case 46:modifiers?result.key="[3;"+(modifiers+1)+"~":result.key="[3~";break;case 36:modifiers?result.key="[1;"+(modifiers+1)+"H":this.applicationCursor?result.key="OH":result.key="[H";break;case 35:modifiers?result.key="[1;"+(modifiers+1)+"F":this.applicationCursor?result.key="OF":result.key="[F";break;case 33:ev.shiftKey?result.scrollDisp=-(this.rows-1):result.key="[5~";break;case 34:ev.shiftKey?result.scrollDisp=this.rows-1:result.key="[6~";break;case 112:modifiers?result.key="[1;"+(modifiers+1)+"P":result.key="OP";break;case 113:modifiers?result.key="[1;"+(modifiers+1)+"Q":result.key="OQ";break;case 114:modifiers?result.key="[1;"+(modifiers+1)+"R":result.key="OR";break;case 115:modifiers?result.key="[1;"+(modifiers+1)+"S":result.key="OS";break;case 116:modifiers?result.key="[15;"+(modifiers+1)+"~":result.key="[15~";break;case 117:modifiers?result.key="[17;"+(modifiers+1)+"~":result.key="[17~";break;case 118:modifiers?result.key="[18;"+(modifiers+1)+"~":result.key="[18~";break;case 119:modifiers?result.key="[19;"+(modifiers+1)+"~":result.key="[19~";break;case 120:modifiers?result.key="[20;"+(modifiers+1)+"~":result.key="[20~";break;case 121:modifiers?result.key="[21;"+(modifiers+1)+"~":result.key="[21~";break;case 122:modifiers?result.key="[23;"+(modifiers+1)+"~":result.key="[23~";break;case 123:modifiers?result.key="[24;"+(modifiers+1)+"~":result.key="[24~";break;default:!ev.ctrlKey||ev.shiftKey||ev.altKey||ev.metaKey?this.isMac||!ev.altKey||ev.ctrlKey||ev.metaKey||(ev.keyCode>=65&&ev.keyCode<=90?result.key=""+String.fromCharCode(ev.keyCode+32):192===ev.keyCode?result.key="`":ev.keyCode>=48&&ev.keyCode<=57&&(result.key=""+(ev.keyCode-48))):ev.keyCode>=65&&ev.keyCode<=90?result.key=String.fromCharCode(ev.keyCode-64):32===ev.keyCode?result.key=String.fromCharCode(0):ev.keyCode>=51&&ev.keyCode<=55?result.key=String.fromCharCode(ev.keyCode-51+27):56===ev.keyCode?result.key=String.fromCharCode(127):219===ev.keyCode?result.key=String.fromCharCode(27):221===ev.keyCode&&(result.key=String.fromCharCode(29))}return result},Terminal.prototype.setgLevel=function(g){this.glevel=g,this.charset=this.charsets[g]},Terminal.prototype.setgCharset=function(g,charset){this.charsets[g]=charset,this.glevel===g&&(this.charset=charset)},Terminal.prototype.keyPress=function(ev){var key;if(this.cancel(ev),ev.charCode)key=ev.charCode;else if(null==ev.which)key=ev.keyCode;else{if(0===ev.which||0===ev.charCode)return!1;key=ev.which}return!(!key||(ev.altKey||ev.ctrlKey||ev.metaKey)&&!isThirdLevelShift(this,ev))&&(key=String.fromCharCode(key),this.emit("keypress",key,ev),this.emit("key",key,ev),this.showCursor(),this.handler(key),!1)},Terminal.prototype.send=function(data){var self=this;this.queue||setTimeout(function(){self.handler(self.queue),self.queue=""},1),this.queue+=data},Terminal.prototype.bell=function(){if(this.visualBell){var self=this;this.element.style.borderColor="white",setTimeout(function(){self.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},Terminal.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var args=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,args)}},Terminal.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var args=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,args)}},Terminal.prototype.resize=function(x,y){var el,i,j,ch,addToY;if(x!==this.cols||y!==this.rows){if(x<1&&(x=1),y<1&&(y=1),j=this.cols,j<x)for(ch=[this.defAttr," ",1],i=this.lines.length;i--;)for(;this.lines[i].length<x;)this.lines[i].push(ch);else for(i=this.lines.length;i--;)for(;this.lines[i].length>x;)this.lines[i].pop();if(this.setupStops(j),this.cols=x,j=this.rows,addToY=0,j<y)for(el=this.element;j++<y;)this.lines.length<y+this.ybase&&(this.ybase>0&&this.lines.length<=this.ybase+this.y+addToY+1?(this.ybase--,addToY++,this.ydisp>0&&this.ydisp--):this.lines.push(this.blankLine())),this.children.length<y&&this.insertRow();else for(;j-- >y;)if(this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++)),this.children.length>y){if(el=this.children.shift(),!el)continue;el.parentNode.removeChild(el)}this.rows=y,this.y>=y&&(this.y=y-1),addToY&&(this.y+=addToY),this.x>=x&&(this.x=x-1),this.scrollTop=0,this.scrollBottom=y-1,this.refresh(0,this.rows-1),this.normal=null,this.emit("resize",{terminal:this,cols:x,rows:y})}},Terminal.prototype.updateRange=function(y){y<this.refreshStart&&(this.refreshStart=y),y>this.refreshEnd&&(this.refreshEnd=y)},Terminal.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},Terminal.prototype.setupStops=function(i){for(null!=i?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this.cols;i+=8)this.tabs[i]=!0},Terminal.prototype.prevStop=function(x){for(null==x&&(x=this.x);!this.tabs[--x]&&x>0;);return x>=this.cols?this.cols-1:x<0?0:x},Terminal.prototype.nextStop=function(x){for(null==x&&(x=this.x);!this.tabs[++x]&&x<this.cols;);return x>=this.cols?this.cols-1:x<0?0:x},Terminal.prototype.eraseRight=function(x,y){for(var line=this.lines[this.ybase+y],ch=[this.eraseAttr()," ",1];x<this.cols;x++)line[x]=ch;this.updateRange(y)},Terminal.prototype.eraseLeft=function(x,y){var line=this.lines[this.ybase+y],ch=[this.eraseAttr()," ",1];for(x++;x--;)line[x]=ch;this.updateRange(y)},Terminal.prototype.clear=function(){if(0!==this.ybase||0!==this.y){this.lines=[this.lines[this.ybase+this.y]],this.ydisp=0,this.ybase=0,this.y=0;for(var i=1;i<this.rows;i++)this.lines.push(this.blankLine());this.refresh(0,this.rows-1),this.emit("scroll",this.ydisp)}},Terminal.prototype.eraseLine=function(y){this.eraseRight(0,y)},Terminal.prototype.blankLine=function(cur){for(var attr=cur?this.eraseAttr():this.defAttr,ch=[attr," ",1],line=[],i=0;i<this.cols;i++)line[i]=ch;return line},Terminal.prototype.ch=function(cur){return cur?[this.eraseAttr()," ",1]:[this.defAttr," ",1]},Terminal.prototype.is=function(term){var name=this.termName;return 0===(name+"").indexOf(term)},Terminal.prototype.handler=function(data){this.emit("data",data)},Terminal.prototype.handleTitle=function(title){this.emit("title",title)},Terminal.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=normal},Terminal.prototype.reverseIndex=function(){var j;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),j=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-j+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=normal},Terminal.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var customKeydownHandler=this.customKeydownHandler;Terminal.call(this,this.options),this.customKeydownHandler=customKeydownHandler,this.refresh(0,this.rows-1),this.viewport.syncScrollArea()},Terminal.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=normal},Terminal.prototype.cursorUp=function(params){var param=params[0];param<1&&(param=1),this.y-=param,this.y<0&&(this.y=0)},Terminal.prototype.cursorDown=function(params){var param=params[0];param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.cursorForward=function(params){var param=params[0];param<1&&(param=1),this.x+=param,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.cursorBackward=function(params){var param=params[0];param<1&&(param=1),this.x-=param,this.x<0&&(this.x=0)},Terminal.prototype.cursorPos=function(params){var row,col;row=params[0]-1,col=params.length>=2?params[1]-1:0,row<0?row=0:row>=this.rows&&(row=this.rows-1),col<0?col=0:col>=this.cols&&(col=this.cols-1),this.x=col,this.y=row},Terminal.prototype.eraseInDisplay=function(params){var j;switch(params[0]){case 0:for(this.eraseRight(this.x,this.y),j=this.y+1;j<this.rows;j++)this.eraseLine(j);break;case 1:for(this.eraseLeft(this.x,this.y),j=this.y;j--;)this.eraseLine(j);break;case 2:for(j=this.rows;j--;)this.eraseLine(j);break;case 3:}},Terminal.prototype.eraseInLine=function(params){switch(params[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},Terminal.prototype.charAttributes=function(params){if(1===params.length&&0===params[0])return void(this.curAttr=this.defAttr);for(var p,l=params.length,i=0,flags=this.curAttr>>18,fg=this.curAttr>>9&511,bg=511&this.curAttr;i<l;i++)p=params[i],p>=30&&p<=37?fg=p-30:p>=40&&p<=47?bg=p-40:p>=90&&p<=97?(p+=8,fg=p-90):p>=100&&p<=107?(p+=8,bg=p-100):0===p?(flags=this.defAttr>>18,fg=this.defAttr>>9&511,bg=511&this.defAttr):1===p?flags|=1:4===p?flags|=2:5===p?flags|=4:7===p?flags|=8:8===p?flags|=16:22===p?flags&=-2:24===p?flags&=-3:25===p?flags&=-5:27===p?flags&=-9:28===p?flags&=-17:39===p?fg=this.defAttr>>9&511:49===p?bg=511&this.defAttr:38===p?2===params[i+1]?(i+=2,fg=matchColor(255&params[i],255&params[i+1],255&params[i+2]),fg===-1&&(fg=511),i+=2):5===params[i+1]&&(i+=2,p=255&params[i],fg=p):48===p?2===params[i+1]?(i+=2,bg=matchColor(255&params[i],255&params[i+1],255&params[i+2]),bg===-1&&(bg=511),i+=2):5===params[i+1]&&(i+=2,p=255&params[i],bg=p):100===p?(fg=this.defAttr>>9&511,bg=511&this.defAttr):this.error("Unknown SGR attribute: %d.",p);this.curAttr=flags<<18|fg<<9|bg},Terminal.prototype.deviceStatus=function(params){if(this.prefix){if("?"===this.prefix)switch(params[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(params[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},Terminal.prototype.insertChars=function(params){var param,row,j,ch;for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.x,ch=[this.eraseAttr()," ",1];param--&&j<this.cols;)this.lines[row].splice(j++,0,ch),this.lines[row].pop()},Terminal.prototype.cursorNextLine=function(params){var param=params[0];param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},Terminal.prototype.cursorPrecedingLine=function(params){var param=params[0];param<1&&(param=1),this.y-=param,this.y<0&&(this.y=0),this.x=0},Terminal.prototype.cursorCharAbsolute=function(params){var param=params[0];param<1&&(param=1),this.x=param-1},Terminal.prototype.insertLines=function(params){var param,row,j;for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.rows-1-this.scrollBottom,j=this.rows-1+this.ybase-j+1;param--;)this.lines.splice(row,0,this.blankLine(!0)),this.lines.splice(j,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},Terminal.prototype.deleteLines=function(params){var param,row,j;for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.rows-1-this.scrollBottom,j=this.rows-1+this.ybase-j;param--;)this.lines.splice(j+1,0,this.blankLine(!0)),this.lines.splice(row,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},Terminal.prototype.deleteChars=function(params){var param,row,ch;for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,ch=[this.eraseAttr()," ",1];param--;)this.lines[row].splice(this.x,1),this.lines[row].push(ch)},Terminal.prototype.eraseChars=function(params){var param,row,j,ch;for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.x,ch=[this.eraseAttr()," ",1];param--&&j<this.cols;)this.lines[row][j++]=ch},Terminal.prototype.charPosAbsolute=function(params){var param=params[0];param<1&&(param=1),this.x=param-1,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.HPositionRelative=function(params){var param=params[0];param<1&&(param=1),this.x+=param,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.sendDeviceAttributes=function(params){params[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(params[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},Terminal.prototype.linePosAbsolute=function(params){var param=params[0];param<1&&(param=1),this.y=param-1,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.VPositionRelative=function(params){var param=params[0];param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.HVPosition=function(params){params[0]<1&&(params[0]=1),params[1]<1&&(params[1]=1),this.y=params[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=params[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.setMode=function(params){if("object"!==("undefined"==typeof params?"undefined":_typeof(params)))if(this.prefix){if("?"===this.prefix)switch(params){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,Terminal.charsets.US),this.setgCharset(1,Terminal.charsets.US),this.setgCharset(2,Terminal.charsets.US),this.setgCharset(3,Terminal.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===params,this.vt200Mouse=1e3===params,this.normalMouse=params>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var normal={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=normal,this.showCursor()}}}else switch(params){case 4:this.insertMode=!0;break;case 20:}else for(var l=params.length,i=0;i<l;i++)this.setMode(params[i])},Terminal.prototype.resetMode=function(params){if("object"!==("undefined"==typeof params?"undefined":_typeof(params)))if(this.prefix){if("?"===this.prefix)switch(params){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(params){case 4:this.insertMode=!1;break;case 20:}else for(var l=params.length,i=0;i<l;i++)this.resetMode(params[i])},Terminal.prototype.setScrollRegion=function(params){this.prefix||(this.scrollTop=(params[0]||1)-1,this.scrollBottom=(params[1]||this.rows)-1,this.x=0,this.y=0)},Terminal.prototype.saveCursor=function(params){this.savedX=this.x,this.savedY=this.y},Terminal.prototype.restoreCursor=function(params){this.x=this.savedX||0,this.y=this.savedY||0},Terminal.prototype.cursorForwardTab=function(params){for(var param=params[0]||1;param--;)this.x=this.nextStop()},Terminal.prototype.scrollUp=function(params){for(var param=params[0]||1;param--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},Terminal.prototype.scrollDown=function(params){for(var param=params[0]||1;param--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},Terminal.prototype.initMouseTracking=function(params){},Terminal.prototype.resetTitleModes=function(params){},Terminal.prototype.cursorBackwardTab=function(params){for(var param=params[0]||1;param--;)this.x=this.prevStop()},Terminal.prototype.repeatPrecedingCharacter=function(params){for(var param=params[0]||1,line=this.lines[this.ybase+this.y],ch=line[this.x-1]||[this.defAttr," ",1];param--;)line[this.x++]=ch},Terminal.prototype.tabClear=function(params){var param=params[0];param<=0?delete this.tabs[this.x]:3===param&&(this.tabs={})},Terminal.prototype.mediaCopy=function(params){},Terminal.prototype.setResources=function(params){},Terminal.prototype.disableModifiers=function(params){},Terminal.prototype.setPointerMode=function(params){},Terminal.prototype.softReset=function(params){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.viewport.syncScrollArea(),this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},Terminal.prototype.requestAnsiMode=function(params){},Terminal.prototype.requestPrivateMode=function(params){},Terminal.prototype.setConformanceLevel=function(params){},Terminal.prototype.loadLEDs=function(params){},Terminal.prototype.setCursorStyle=function(params){},Terminal.prototype.setCharProtectionAttr=function(params){},Terminal.prototype.restorePrivateValues=function(params){},Terminal.prototype.setAttrInRectangle=function(params){for(var line,i,t=params[0],l=params[1],b=params[2],r=params[3],attr=params[4];t<b+1;t++)for(line=this.lines[this.ybase+t],i=l;i<r;i++)line[i]=[attr,line[i][1]];this.updateRange(params[0]),this.updateRange(params[2])},Terminal.prototype.fillRectangle=function(params){for(var line,i,ch=params[0],t=params[1],l=params[2],b=params[3],r=params[4];t<b+1;t++)for(line=this.lines[this.ybase+t],i=l;i<r;i++)line[i]=[line[i][0],String.fromCharCode(ch)];this.updateRange(params[1]),this.updateRange(params[3])},Terminal.prototype.enableLocatorReporting=function(params){params[0]>0},Terminal.prototype.eraseRectangle=function(params){var line,i,ch,t=params[0],l=params[1],b=params[2],r=params[3];for(ch=[this.eraseAttr()," ",1];t<b+1;t++)for(line=this.lines[this.ybase+t],i=l;i<r;i++)line[i]=ch;this.updateRange(params[0]),this.updateRange(params[2])},Terminal.prototype.insertColumns=function(){for(var i,param=params[0],l=this.ybase+this.rows,ch=[this.eraseAttr()," ",1];param--;)for(i=this.ybase;i<l;i++)this.lines[i].splice(this.x+1,0,ch),this.lines[i].pop();this.maxRange()},Terminal.prototype.deleteColumns=function(){for(var i,param=params[0],l=this.ybase+this.rows,ch=[this.eraseAttr()," ",1];param--;)for(i=this.ybase;i<l;i++)this.lines[i].splice(this.x,1),this.lines[i].push(ch);this.maxRange()},Terminal.charsets={},Terminal.charsets.SCLD={"`":"◆",a:"▒",b:"\t",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\x0B",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},Terminal.charsets.UK=null,Terminal.charsets.US=null,Terminal.charsets.Dutch=null,Terminal.charsets.Finnish=null,Terminal.charsets.French=null,Terminal.charsets.FrenchCanadian=null,Terminal.charsets.German=null,Terminal.charsets.Italian=null,Terminal.charsets.NorwegianDanish=null,Terminal.charsets.Spanish=null,Terminal.charsets.Swedish=null,Terminal.charsets.Swiss=null,Terminal.charsets.ISOLatin=null,matchColor._cache={},matchColor.distance=function(r1,g1,b1,r2,g2,b2){return Math.pow(30*(r1-r2),2)+Math.pow(59*(g1-g2),2)+Math.pow(11*(b1-b2),2)};var wcwidth=function(opts){function bisearch(ucs){var mid,min=0,max=COMBINING.length-1;if(ucs<COMBINING[0][0]||ucs>COMBINING[max][1])return!1;for(;max>=min;)if(mid=Math.floor((min+max)/2),ucs>COMBINING[mid][1])min=mid+1;else{if(!(ucs<COMBINING[mid][0]))return!0;max=mid-1}return!1}function wcwidth(ucs){return 0===ucs?opts.nul:ucs<32||ucs>=127&&ucs<160?opts.control:bisearch(ucs)?0:1+(ucs>=4352&&(ucs<=4447||9001==ucs||9002==ucs||ucs>=11904&&ucs<=42191&&12351!=ucs||ucs>=44032&&ucs<=55203||ucs>=63744&&ucs<=64255||ucs>=65040&&ucs<=65049||ucs>=65072&&ucs<=65135||ucs>=65280&&ucs<=65376||ucs>=65504&&ucs<=65510||ucs>=131072&&ucs<=196605||ucs>=196608&&ucs<=262141))}var COMBINING=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];return wcwidth}({nul:0,control:0});Terminal.EventEmitter=_EventEmitter.EventEmitter,Terminal.CompositionHelper=_CompositionHelper.CompositionHelper,Terminal.Viewport=_Viewport.Viewport,Terminal.inherits=inherits,Terminal.on=on,Terminal.off=off,Terminal.cancel=cancel,module.exports=Terminal}).call(this,"/src")},{"./CompositionHelper.js":1,"./EventEmitter.js":2,"./Viewport.js":3,"./handlers/Clipboard.js":4}]},{},[5])(5)})}]);